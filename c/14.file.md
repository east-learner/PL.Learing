### [[C语言 文件存储操作]](#top)  <b id="top"></b>
`文件是操作系统管理数据的基本单位，文件一般是指存储在外部存储介质上的有名字的一系列相关数据的有序集合。它是程序对数据进行读写操作的基本对象。在 C 语言中，把输入和输出设备都看作文件。` 

------

- [x] [`1.文件分类及其说明`](#target1)
- [x] [`2.文件的打开与关闭`](#target2)
- [x] [`3.文件的顺序读写`](#target3)
- [x] [`4.目录四`](#target4)
- [x] [`5.目录五`](#target5)
  * [`5.1 目录五.一`](#target51)
  * [`5.2 目录五.二`](#target52)
- [x] [`6.目录六`](#target6)

------

#####  [1.文件分类及其说明](#top) <b id="target1"></b> 
`文件一般包括三要素：文件路径、文件名、后缀。` 

```javascript
由于在 C 语言中 '\' 一般是转义字符的起始标志
故在路径中需要用两个 '\' 表示路径中目录层次的间隔，也可以使用 '/' 作为路径中的分隔符。

例如，"E:\\ch10.doc"或者"E:/ch10.doc"
```
`C 语言中的输入和输出都是和文件相关的，即程序从文件中输入（读取）数据，程序向文件中输出（写入）数据。`

`流式文件是以字节为单位，对流式文件的访问一般采用穷举搜索的方式，效率不高，故一般需频繁访问的较大数据
不适宜采用流式文件逻辑结构。但由于流式文件管理简单，用户可以较方便地对文件进行相关操作。`

##### 类别
`根据文件中数据的组织形式的不同，可以把文件分为：文本文件和二进制文件。`

* `文本文件`：`把要存储的数据当成一系列字符组成，把每个字符的 ASCII 码值存入文件中。每个 ASCII 码值占一个字节，每个字节表示一个字符。故文本文件也称作字符文件或 ASCII 文件，是字符序列文件。`
* `二进制文件`：`把数据对应的二进制形式存储到文件中，是字节序列文件。`

##### 说明
`C 程序与文件的访问中，经常涉及换行操作。二进制文件与文本文件在换行规则上略有差别。`

`在 UNIX 和 Linux 系统中，无论是二进制文件还是文本文件，均是以单字节 LF(0x0A) 即作为文件中的换行符。`

`由于 C 语言是在 UNIX 系统上提出并发展起来的，故 C 语言中的换行规则与 UNIX 系统文件中的换行规则是一致的，使用 LF 即 '\n' 表示换行。因此 C 语言程序访问 UNIX/Linux 系统中的文件时，可直接访问，不需要转换。`

##### 缓冲和非缓冲文件系统
`C语言中文件系统可分为两大类，一种是缓冲文件系统也称为标准文件系统，另一种是非缓冲文件系统。ANSI C 标准中只采用缓冲文件系统。`

* `缓冲文件系统`：`系统自动为每个打开的文件在内存开辟一块缓冲区，缓冲区的大小一般由系统决定。当程序向文件中输出（写入）数据时，程序先把数据输出到缓冲区，待缓冲区满或数据输出完成后，再把数据从缓冲区输出到文件；当程序从文件输入(读取)数据时，先把数据输入到缓冲区，待缓冲区满或数据输人完成后，再把数据从缓冲区逐个输入到程序。`
* `非缓冲文件系统`：`系统不自动为打开的文件开辟内存缓冲区，由程序设计者自行设置缓冲区及大小。`

`每个 C 编译系统 stdio.h 文件中的 FILE 定义可能会稍有差别，但均包含文件读写的基本信息。`
##### [2.文件的打开与关闭](#top) <b id="target2"></b> 

##### 文件类型指针
`文件信息是保存在一个结构体变量中的。该结构体类型是由系统定义的，取名为FILE`
```c
#include<stdio.h>

FILE *fp;
```
```c
#ifndef _FILE_DEFINED
  struct _iobuf {
    char *_ptr;
    int _cnt;
    char *_base;
    int _flag;
    int _file;
    int _charbuf;
    int _bufsiz;
    char *_tmpfname;
  };
  typedef struct _iobuf FILE;
#define _FILE_DEFINED
```
##### 打开关闭
`这里的“打开”和“关闭”可调用标准库 stdio.h 中的 fopen 和 fclose 函数实现。`

```c
FILE * fopen(char *filename, char *mode);

int fclose(FILE *fp); /* 返回值：正常关闭，返回否则返回 EOF(-1)。 */
```

|`模式`| 	`含 义`| 	`说 明`|
|:--|:--|:---|
|`r`|`只读 read`|`文件必须存在，否则打开失败`|
|`w`|`只写 write`|`若文件存在，则清除原文件内容后写入；否则，新建文件后写入`|
|`a`|`追加只写 add`|`若文件存在，则位置指针移到文件末尾，在文件尾部追加写人，故该方式不 删除原文件数据；若文件不存在，则打开失败`|
|`r+`|`读写 + = write + read`|`文件必须存在。在只读 r 的基础上加 '+' 表示增加可写的功能。下同`|
|`w+`|`读写`|`新建一个文件，先向该文件中写人数据，然后可从该文件中读取数据`|
|`a+`|`读写`|`在” a”模式的基础上，增加可读功能`|
|`rb`|`二进制读 binary`|`功能同模式”r”，区别：b表示以二进制模式打开。下同`|
|`wb`|`二进制写`|`功能同模式“w”。二进制模式`|
|`ab`|`二进制追加`|`功能同模式”a”。二进制模式`|
|`rb+`|`二进制读写`|`功能同模式"r+”。二进制模式`|
|`wb+`|`二进制读写`|`功能同模式”w+”。二进制模式`|
|`ab+`|`二进制读写`|`功能同模式”a+”。二进制模式`|

```c
#include <malloc.h>
#include <stdio.h>
// 主函数
int main(int argc, char *argv[]) // *argv[]：指针数组
{
  FILE *fp; // 文件指针
  fp = fopen("input.txt","r"); // 打开文件
  read/write fucntions // 读或者写函数
  fclose(fp); // 关闭文件指针

  return 0;
}
```

##### [3.文件的顺序读写](#top) <b id="target3"></b> 
`对文件读取操作完成后，如果从文件中读取到的每个数据的顺序与文件中该数据的物理存放顺序保持一致，则称该读取过程为顺序读取；同理，对文件写入操作完成后，如果文件中所有数据的存放顺序与各个数据被写入的先后顺序保持一致，则称该写入过程为顺序写入。`

##### fgetc 
`c 语言中提供了从文件中逐个输入字符及向文件中逐个输出字符的顺序读写函数 fgetc 和 fputc 及调整文件读写位置到文件开始处的函数 rewind。这些函数均在标准输入输出头文件 stdio.h 中。`

```c
// 字符输入函数 fgetc 的函数原型为：
int fgetc (FILE *fp);

//字符输出函数 fputc 的函数原型为： 
int fputc (int c, FILE *fp);
```

* `fgetc`:`函数功能：从文件指针 fp 所指向的文件中输入一个字符。输入成功，返回该字符；已读取到文件末尾，或遇到其他错误，即输入失败，则返回文本文件结束标志 EOF(EOF 在 stdio.h 中已定义，一般为 -1)。`
* `fputc`:`函数功能：向 fp 指针所指向的文件中输出字符 c，输出成功，返回该字符；输出失败，则返回 EOF(-1)。`


--------------------
`作者:` `蒋星 JxKicker` 
`完成时间`:`2020年3月27日17:09:59`
`备注信息`: `任意使用` 
